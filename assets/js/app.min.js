function selectpickerReset(e,t,a,n){e.val(""),$("option",e).not(":first").addClass("hide"),t?e.selectpicker("show"):e.selectpicker("hide"),null!=n?$("option[data-family='"+a+"'][data-brand='"+n+"']",e).removeClass("hide"):a&&$("option[data-family='"+a+"']",e).removeClass("hide"),$("option",e).length-1==$("option.hide",e).length&&e.selectpicker("hide"),e.selectpicker("refresh")}function updateFacebookButton(){var e=["about-us","bespoke-jewellery","old-gold","services","valuations","jewellery-insurance","anniversaries","birthstones","zodiac-stones","diamonds","pearls","contact-us", "blog"];$.each(e,function(e,t){alert("Index #"+e+": "+t)})}if(navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement("style");msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(msViewportStyle)}var API,cart;$(document).ready(function(){$("#wrap").bind("contextmenu",function(){return!1}),"All"==$("#selectpicker_family").val()&&$("#selectpicker_brand, #selectpicker_type").selectpicker("hide"),"All"==$("#selectpicker_brand").val()&&$("#selectpicker_type").selectpicker("hide"),$("#productMenuGo").click(function(){family=$("#selectpicker_family"),brand=$("#selectpicker_brand"),type=$("#selectpicker_type"),f=family.find(":selected").val(),b=brand.find(":selected").val(),t=type.find(":selected").val(),url=path+"product/"+f+("All"==b?"":"/"+b)+("All"==t?"":"/"+t),window.location.href=url.toLowerCase()}),$("span#shopping_cart").click(function(){window.location.href=path+"cart"}),$("#menu").mmenu({dragOpen:!0,counters:!0,header:!0}),API=$("#menu").data("mmenu"),$(".open-mmenu").click(function(){API.open()}),tour=new Tour({name:"mytour",template:"<div class='popover tour'><div class='arrow'></div><h3 class='popover-title' style='background-color:#c4c4c4;'></h3><div class='popover-content'></div><div class='popover-navigation'><button class='btn btn-sm btn-success' data-role='prev'><i class='fa fa-step-backward'></i>Prev</button><span data-role='separator'></span><button class='btn btn-sm btn-success mls mr' data-role='next'><i class='fa fa-step-forward'></i>Next</button></div><div class='popover-navigation' style='float:left;'><button class='btn btn-sm btn-danger mbs' data-role='end'><i class='fa fa-stop'></i>End tour</button></div></nav></div>",steps:[{element:"img.menu",placement:"bottom",title:"Our menu",content:"Click here and our menu will open."},{element:"#logo",placement:"bottom",title:"Our menu",content:"Click our logo to quickly and easy open our menu."},{element:"#search",placement:"bottom",title:"Search our site.",content:"You can type anything here (product id, words etc) and we'll return relevant results."},{element:"#shopping_cart",placement:"left",title:"Shopping Cart",content:"Here is your shopping cart."}]}).init().start(),cart=new Tour({name:"mycart",template:"<div class='popover tour' style='z-index:10001'>\n                        <div class='arrow'></div>\n                        <h3 class='popover-title' style='background-color:#c4c4c4;'></h3>\n                        <div class='popover-content'></div>\n                        <div class='popover-navigation'>\n                            <button class='btn btn-sm btn-success pull-left mbs' data-role='end'>OK</button>\n                        </div>\n                    </div>",backdrop:!0,steps:[{element:"#shopping_cart",placement:"left",title:"Your Shopping Cart",content:"A new item has been added."}]}),$(".restart_tour").click(function(e){e.preventDefault(),tour.restart()}),$(".show_cart").click(function(e){e.preventDefault(),cart.restart()}),$('[name="menu_select"]').selectpicker().change(function(){switch(family=$("#selectpicker_family"),brand=$("#selectpicker_brand"),type=$("#selectpicker_type"),id=$(this).attr("id"),id){case"selectpicker_family":selectpickerReset(brand,!0,family.val(),null),selectpickerReset(type,!1,null,null);break;case"selectpicker_brand":selectpickerReset(type,!0,brand.find(":selected").attr("data-family"),brand.val());break;case"selectpicker_type":}}),$(".selectpicker.calcprice").selectpicker().change(function(e){$("span.price").html(img_wait_small),e.preventDefault(),info=$("form.config").serializeArray(),item=$(".buy").attr("data-o"),obj={config:JSON.stringify(info),item:item},$.post(path+"ajax/get_price",obj).done(function(e){e&&(j=$.parseJSON(e),0==j.price?($("span.price").html(POA),$(".buy").attr("data-o","").hide()):($("span.price").html(j.price_txt),$(".buy").show()),$(".buy").attr("data-o",encodeURIComponent(JSON.stringify(j))))}).fail(function(e){alert(e.responseText)}).always(function(){})}),$(".po2 button").click(function(){$(this).addClass("active"),$(this).siblings().removeClass("active"),$(".buy").attr("data-o",$(this).attr("data-o"))}),$(".buy").click(function(){o=$(this).attr("data-o"),void 0!=o&&(obj=$.parseJSON(decodeURIComponent(o)),$.post(path+"ajax/save_product_to_cart",obj).done(function(e){e&&(j=$.parseJSON(e),$("#shopping_cart .badge").html(j.cnt+(1!=j.cnt?" items":" item")+" @ "+j.price),cart.restart())}).fail(function(e){alert(e.responseText)}).always(function(){}))}),$(".rating").on("change",function(){$(this).next(".label").text($(this).val())})});
